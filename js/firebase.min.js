function login(){$("#loginButton").html('<div class="spinner-border spinner-border-sm" role="status"><span class="sr-only"></span></div> Processing');var email=$("#sign-in-email").val(),password=$("#sign-in-pass").val();firebase.auth().signInWithEmailAndPassword(email,password).then(user=>{userObj=user,authCheck()}).catch(error=>{"auth/user-not-found"==error.code?$("#signupModal").modal("show"):"auth/wrong-password"==error.code&&alert("Wrong Password. Please Check your Password again."),$("#loginButton").html("Log In")})}function resetPassword(){firebase.auth().sendPasswordResetEmail($("#reset-email").val()).then((function(){alert("Please Check your email inbox and reset your password from the like we sent you.")})).catch((function(error){alert(error.message)}))}function signUp(){$("#sign-up-pass").val()==$("#sign-up-cpass").val()?(firebase.auth().createUserWithEmailAndPassword($("#sign-up-email").val(),$("#sign-up-pass").val()).then(user=>{userObj=user,firebase.auth().currentUser.updateProfile({displayName:$("#full-name").val()}),alert("Successfully Signed Up. Please make the payment in order to access the program."),authCheck()}).catch(error=>{var errorMessage=error.message;alert(errorMessage),$("#signupButton").html("Sign Up")}),$("#signupButton").html('<div class="spinner-border spinner-border-sm" role="status"><span class="sr-only"></span></div> Processing'),$("#signupModal").modal("toggle")):alert("Please Check Your Passwords")}var userObj,catt;function authCheck(){firebase.database().ref(`smat/${userObj.uid}/`).update({authCheck:1}),setTimeout((function(){firebase.database().ref(`smat/${userObj.uid}/authCheck`).once("value").then((function(snapshot){auth=snapshot.val()||0,auth?(firebase.database().ref(`smat/${userObj.uid}/`).update({authCheck:0,email:userObj.email,name:userObj.displayName||"No Username"}),"/lin.html"!=window.location.pathname&&(window.location.href="/lin.html"),firebase.database().ref(`smat/${userObj.uid}/currentAttempt`).on("value",(function(snapshot){attempts=snapshot.val()||1,catt=attempts,$(".attempt").text(catt)})),"/lin.html"==window.location.pathname&&(drawProgression(),$("#uid-text").val(userObj.uid),$("#uma-text").val(userObj.email))):(window.location.href="/index.html#Payment",$("#loginButton").html("Log In"),$("#signupButton").html("Sign Up"),signOut())}))}),5e3)}function signOut(){firebase.auth().signOut().then((function(){})).catch((function(error){alert(error.message)}))}function writeCurrentAttempt(){var nat=catt+1;firebase.database().ref(`smat/${userObj.uid}/`).update({currentAttempt:nat})}firebase.auth().onAuthStateChanged((function(user){user?(userObj=user,authCheck()):"/index.html"!=window.location.pathname&&(window.location.href="/index.html")}));var TimeInt=new Date;function writeScore(cps){CT=new Date,TimeInt.getTime()+6e4<CT.getTime()&&($("#practicemode").is(":checked")||(firebase.database().ref(`smat/${userObj.uid}/Attempts/${catt}`).update({cps:cps}),writeCurrentAttempt(),TimeInt=new Date))}function drawProgression(){firebase.database().ref(`smat/${userObj.uid}/Attempts/`).limitToLast(100).on("value",(function(snapshot){var lab=[],avg=[],lar=[],dar=[],cnt=0;snapshot.forEach((function(childSnapshot){var childKey=childSnapshot.key,childData=childSnapshot.val();lab.push(childKey),avg.push(parseFloat(childData.cps))})),$(".avg").text(math.mean(avg).toFixed(3));for(var i=avg.length-1;i>=0&&20!=cnt;i--)lar.push(lab[i]),dar.push(avg[i]),cnt+=1;lar.reverse(),dar.reverse(),math.std(dar).toFixed(3)<.012?($(".prep").text("isn't changing that-much."),$(".quote").text("You are maintaining a steady rate, Try harder to increase it.")):math.mean(dar)-parseFloat(dar[dar.length-1])<0?($(".prep").text("is Increasing"),$(".quote").text("Good Work! Keep it up.")):math.mean(dar)==parseFloat(dar[dar.length-1])?($(".prep").text("is Average."),$(".quote").text("You are sticking with your peek performance, Try Harder! You can do better!")):($(".prep").text("is Decreasing!"),$(".quote").text("You must seriously consider the situation, Maybe take some rest?"));var data={labels:lar,series:[{data:dar}]},options={axisX:{labelInterpolationFnc:function(value){return"A"+value}}},responsiveOptions=[["screen and (min-width: 641px) and (max-width: 1024px)",{showPoint:!1,axisX:{labelInterpolationFnc:function(value){return"A"+value}}}],["screen and (max-width: 640px)",{showPoint:!1,axisX:{labelInterpolationFnc:function(value){return"A"+value}}}]];new Chartist.Line("#progressionChart",data,options,responsiveOptions)}))}function mail(){window.location.href=`mailto:speedmathslk@gmail.com?subject=Feedback%20From%20${encodeURIComponent($("#uma-text").val())}%20${encodeURIComponent($("#uid-text").val())}&body=${encodeURIComponent($("#feedback-text").val())}`}function changeName(){firebase.auth().currentUser.updateProfile({displayName:$("#newname").val()}),alert("Process Queued"),resetAccountSettingsWindow()}function changePassword(){firebase.auth().currentUser.updatePassword($("#newpass").val()).then((function(){alert("Successfully Changed The Password"),resetAccountSettingsWindow()})).catch((function(error){alert(error.message),resetAccountSettingsWindow()}))}function resetAccountSettingsWindow(){$("#newname").val(""),$("#newpass").val(""),document.location.reload()}TimeInt=new Date(TimeInt.getTime()-6e4);